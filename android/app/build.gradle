plugins {
    id "com.android.application"
    id "org.jetbrains.kotlin.android"      // â† í•˜ë‚˜ë§Œ ë‚¨ê¸°ê¸°
    id "dev.flutter.flutter-gradle-plugin"
    id "com.google.gms.google-services"
    // id "com.google.firebase.crashlytics" // ì“°ë©´ í™œì„±í™”
}

// keystore
def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file("key.properties")
if (keystorePropertiesFile.exists()) {
  keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

android {
    namespace "kr.co.iljujob"        // â† Groovy ë¬¸ë²•
    compileSdk 35
    ndkVersion "27.0.12077973"

    defaultConfig {
        applicationId "kr.co.iljujob"
        minSdk 23
        targetSdk 35
        versionCode flutter.versionCode.toInteger()
        versionName flutter.versionName
        multiDexEnabled true
    }

    signingConfigs {
        release {
            if (keystorePropertiesFile.exists()) {
                storeFile file(keystoreProperties['storeFile'])
                storePassword keystoreProperties['storePassword']
                keyAlias keystoreProperties['keyAlias']
                keyPassword keystoreProperties['keyPassword']
            }
        }
    }

    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled false
            shrinkResources false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
        debug {
            debuggable true
            // signingConfig signingConfigs.debug  â† êµ³ì´ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ debug ì„œëª… ì‚¬ìš©
        }
    }

    // ğŸ”´ meta-inf ì¶©ëŒ í•´ê²°ì€ ì—¬ê¸°! (android ë¸”ë¡ "ë°”ë¡œ ì•„ë˜" ë ˆë²¨)
    packaging {
        resources {
            // ë°©ë²• A: ì™„ì „ ì œì™¸(ê¶Œì¥)
            excludes += [
                "META-INF/DEPENDENCIES",
                "META-INF/DEPENDENCIES.txt",
                "META-INF/LICENSE",
                "META-INF/LICENSE.txt",
                "META-INF/NOTICE",
                "META-INF/NOTICE.txt",
                "META-INF/AL2.0",
                "META-INF/LGPL2.1"
            ]
            // ë°©ë²• B: í•˜ë‚˜ë§Œ ì±„íƒ(ìœ„ excludes ëŒ€ì‹  ì‚¬ìš© ê°€ëŠ¥)
            // pickFirsts += ["META-INF/DEPENDENCIES", "META-INF/DEPENDENCIES.txt"]
        }
        jniLibs {
            useLegacyPackaging true
        }
    }

    buildFeatures { buildConfig true }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
        coreLibraryDesugaringEnabled true
    }
    kotlinOptions { jvmTarget = "17" }
}

dependencies {
    coreLibraryDesugaring "com.android.tools:desugar_jdk_libs:2.0.4"

    implementation platform("com.google.firebase:firebase-bom:33.13.0")
    implementation "com.google.firebase:firebase-messaging"
    implementation "com.google.firebase:firebase-analytics"

    implementation "androidx.appcompat:appcompat:1.6.1"
    implementation "com.google.android.material:material:1.11.0"
    implementation "androidx.core:core-splashscreen:1.0.1"
    implementation "androidx.multidex:multidex:2.0.1"
}

// ë°˜ë“œì‹œ ë§¨ ì•„ë˜
flutter { source "../.." }
